{"ast":null,"code":"import React,{useEffect,useReducer,useCallback,useState}from\"react\";import\"./css/HomePage.css\";import{useNavigation}from\"../Router/Router\";import io from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HomePage=function HomePage(){var _useNavigation=useNavigation(),onClickStart=_useNavigation.onClickStart,onClickOwner=_useNavigation.onClickOwner,onClickPay=_useNavigation.onClickPay,onClickDone=_useNavigation.onClickDone,onClickMain=_useNavigation.onClickMain;var connectToSocket=function connectToSocket(){var socket=io.connect('http://127.0.0.1:5000');try{console.log(\"실행중\");var message={\"message\":\"전송완료\"};socket.emit('call_owner',message);// 서버에 POST 요청을 보내도록 수정\nfetch('/call',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(message)}).then(function(response){return response.json();}).then(function(data){alert(data.message);}).catch(function(error){alert('전송실패');console.error('Error:',error);});}catch(error){alert(\"전송실패\");console.error('Error:',error);}return function(){socket.disconnect();// 컴포넌트가 언마운트될 때 소켓 연결 해제\n};};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"ownerCall\",onClick:connectToSocket,children:\"\\uC9C1\\uC6D0 \\uD638\\uCD9C\\uBC84\\uD2BC\"}),/*#__PURE__*/_jsx(\"div\",{className:\"selfCounter\",children:\"\\uBB34\\uC778 \\uACC4\\uC0B0\\uB300\"}),/*#__PURE__*/_jsx(\"button\",{className:\"start\",onClick:onClickStart,children:\"\\uC2DC\\uC791\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"div\",{className:\"back\"}),/*#__PURE__*/_jsx(\"div\",{className:\"img\"})]});};export default HomePage;","map":{"version":3,"names":["React","useEffect","useReducer","useCallback","useState","useNavigation","io","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","HomePage","_useNavigation","onClickStart","onClickOwner","onClickPay","onClickDone","onClickMain","connectToSocket","socket","connect","console","log","message","emit","fetch","method","headers","body","JSON","stringify","then","response","json","data","alert","catch","error","disconnect","children","className","onClick"],"sources":["C:/Users/leesuhyeon/Desktop/깃허브/front/src/component/page/HomePage.jsx"],"sourcesContent":["import React, { useEffect, useReducer, useCallback, useState } from \"react\";\r\nimport \"./css/HomePage.css\";\r\nimport { useNavigation } from \"../Router/Router\";\r\nimport io from 'socket.io-client';\r\nconst HomePage = () => {\r\n  const { onClickStart, onClickOwner, onClickPay, onClickDone, onClickMain } =\r\n    useNavigation();\r\n    const connectToSocket = () => {\r\n      const socket = io.connect('http://127.0.0.1:5000');\r\n  \r\n      try {\r\n        console.log(\"실행중\");\r\n        const message = {\"message\": \"전송완료\"};\r\n        socket.emit('call_owner', message);\r\n  \r\n        // 서버에 POST 요청을 보내도록 수정\r\n        fetch('/call', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(message),\r\n        })\r\n          .then(response => response.json())\r\n          .then(data => {\r\n            alert(data.message);\r\n          })\r\n          .catch(error => {\r\n            alert('전송실패');\r\n            console.error('Error:', error);\r\n          });\r\n      } catch (error) {\r\n        alert(\"전송실패\");\r\n        console.error('Error:', error);\r\n      }\r\n  \r\n      return () => {\r\n        socket.disconnect(); // 컴포넌트가 언마운트될 때 소켓 연결 해제\r\n      };\r\n    };\r\n  return (\r\n    <>\r\n      <button className=\"ownerCall\" onClick={connectToSocket}>\r\n        직원 호출버튼\r\n      </button>\r\n      <div className=\"selfCounter\">무인 계산대</div>\r\n\r\n      <button className=\"start\" onClick={onClickStart}>\r\n        시작하기\r\n      </button>\r\n      <div className=\"back\"></div>\r\n      <div className=\"img\"></div>\r\n    </>\r\n  );\r\n};\r\nexport default HomePage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,UAAU,CAAEC,WAAW,CAAEC,QAAQ,KAAQ,OAAO,CAC3E,MAAO,oBAAoB,CAC3B,OAASC,aAAa,KAAQ,kBAAkB,CAChD,MAAO,CAAAC,EAAE,KAAM,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAClC,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAA,CAAS,CACrB,IAAAC,cAAA,CACET,aAAa,CAAC,CAAC,CADTU,YAAY,CAAAD,cAAA,CAAZC,YAAY,CAAEC,YAAY,CAAAF,cAAA,CAAZE,YAAY,CAAEC,UAAU,CAAAH,cAAA,CAAVG,UAAU,CAAEC,WAAW,CAAAJ,cAAA,CAAXI,WAAW,CAAEC,WAAW,CAAAL,cAAA,CAAXK,WAAW,CAEtE,GAAM,CAAAC,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAA,CAAS,CAC5B,GAAM,CAAAC,MAAM,CAAGf,EAAE,CAACgB,OAAO,CAAC,uBAAuB,CAAC,CAElD,GAAI,CACFC,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC,CAClB,GAAM,CAAAC,OAAO,CAAG,CAAC,SAAS,CAAE,MAAM,CAAC,CACnCJ,MAAM,CAACK,IAAI,CAAC,YAAY,CAAED,OAAO,CAAC,CAElC;AACAE,KAAK,CAAC,OAAO,CAAE,CACbC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACP,OAAO,CAC9B,CAAC,CAAC,CACCQ,IAAI,CAAC,SAAAC,QAAQ,QAAI,CAAAA,QAAQ,CAACC,IAAI,CAAC,CAAC,GAAC,CACjCF,IAAI,CAAC,SAAAG,IAAI,CAAI,CACZC,KAAK,CAACD,IAAI,CAACX,OAAO,CAAC,CACrB,CAAC,CAAC,CACDa,KAAK,CAAC,SAAAC,KAAK,CAAI,CACdF,KAAK,CAAC,MAAM,CAAC,CACbd,OAAO,CAACgB,KAAK,CAAC,QAAQ,CAAEA,KAAK,CAAC,CAChC,CAAC,CAAC,CACN,CAAE,MAAOA,KAAK,CAAE,CACdF,KAAK,CAAC,MAAM,CAAC,CACbd,OAAO,CAACgB,KAAK,CAAC,QAAQ,CAAEA,KAAK,CAAC,CAChC,CAEA,MAAO,WAAM,CACXlB,MAAM,CAACmB,UAAU,CAAC,CAAC,CAAE;AACvB,CAAC,CACH,CAAC,CACH,mBACE5B,KAAA,CAAAF,SAAA,EAAA+B,QAAA,eACEjC,IAAA,WAAQkC,SAAS,CAAC,WAAW,CAACC,OAAO,CAAEvB,eAAgB,CAAAqB,QAAA,CAAC,uCAExD,CAAQ,CAAC,cACTjC,IAAA,QAAKkC,SAAS,CAAC,aAAa,CAAAD,QAAA,CAAC,iCAAM,CAAK,CAAC,cAEzCjC,IAAA,WAAQkC,SAAS,CAAC,OAAO,CAACC,OAAO,CAAE5B,YAAa,CAAA0B,QAAA,CAAC,0BAEjD,CAAQ,CAAC,cACTjC,IAAA,QAAKkC,SAAS,CAAC,MAAM,CAAM,CAAC,cAC5BlC,IAAA,QAAKkC,SAAS,CAAC,KAAK,CAAM,CAAC,EAC3B,CAAC,CAEP,CAAC,CACD,cAAe,CAAA7B,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}